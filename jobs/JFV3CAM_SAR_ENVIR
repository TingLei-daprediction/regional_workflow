set -x

export RUN_ENVIR=emc
export envir=${envir:-para}
export NET=fv3cam
export RUN=fv3sar
export model=fv3sar_da	# fv3sar (cold start) or fv3sar_da (with DA)
#cltorg export CCPP=false
#cltorg export CCPP_SUITE=FV3_GFS_2017_gfdlmp_regional
export CCPP=true
export MPSUITE=thompson
export CCPP_SUITE=FV3_GFS_v15_thompson_mynn

#export CCPP=false
#export MPSUITE=gfdlmp
#export CCPP_SUITE=FV3_GFS_2017_gfdlmp_regional

if [ ${machine} = "wcoss_dell_p3" ]
then

export COMINgdas=${COMINgdas:-/gpfs/dell1/nco/ops/com/gfs/prod}
export GBCOMINgfs=${GBCOMINgfs:-/gpfs/dell1/nco/ops/com/gfs/prod}
export COMINgfs=${COMINgfs:-/gpfs/dell1/nco/ops/com/gfs/prod}

export PTMP=${PTMP:-/gpfs/dell1/ptmp/${USER}}
export STMP=${STMP:-/gpfs/dell1/stmp/${USER}}
export rzdmuser=bblake

export NDATE=/gpfs/dell1/nco/ops/nwprod/prod_util.v1.1.0/exec/ips/ndate
export NHOUR=/gpfs/dell1/nco/ops/nwprod/prod_util.v1.1.0/exec/ips/nhour
export HOMEfv3=${HOMEfv3:-/gpfs/dell2/emc/modeling/noscrub/$USER/regional_workflow}

elif [ ${machine} = "wcoss_cray" ]
then

export COMINgdas=${COMINgdas:-/gpfs/dell1/nco/ops/com/gfs/prod}
export GBCOMINgfs=${GBCOMINgfs:-/gpfs/dell1/nco/ops/com/gfs/prod}
export COMINgfs=${COMINgfs:-/gpfs/dell1/nco/ops/com/gfs/prod}
export COMINrap=${COMINrap:-/gpfs/hps/nco/ops/com/rap/prod}
 
export PTMP=${PTMP:-/gpfs/hps3/ptmp/${USER}}
export STMP=${STMP:-/gpfs/hps3/stmp/${USER}}
export rzdmuser=mpyle

export HOMEfv3=${HOMEfv3:-/gpfs/hps3/emc/meso/save/$USER/regional_workflow}
export NDATE=/gpfs/hps/nco/ops/nwprod/prod_util.v1.1.0/exec/ndate
export NHOUR=/gpfs/hps/nco/ops/nwprod/prod_util.v1.1.0/exec/nhour

export COMINbias=$COMOUT
export fixcrtm=${fixcrtm:-/gpfs/hps/nco/ops/nwpara/lib/crtm/v2.2.7/fix}
export Fix_temp=${Fix_temp:-/gpfs/hps3/emc/meso/save/Ting.Lei/dr-new-regional-workflow/regional_workflow/dr-Fix_temp}
export GESROOT_HOLD=/gpfs/hps3/emc/meso/save/Ting.Lei/dr-Eric/gesroot_hold

elif [ ${machine} = "hera" ]
then

#cltexport COMINgdas=${COMINgdas:-/scratch2/NCEPDEV/fv3-cam/emc.campara/fv3-input/COMGFS}
#clt export COMINgdas=${COMINgdas:-/scratch4/NCEPDEV/rstprod/com/gfs/prod}
export COMINgdas=${COMINgdas:-/scratch1/NCEPDEV/rstprod/com/gfs/prod}
#clt if [ $tmmark -ne tm00 ] ; then
#clt export COMINgfs=${COMINgfs:-/scratch4/NCEPDEV/rstprod/com/gfs/prod}
#clt else
#clt export COMINgfs=${COMINgfs:-/scratch2/NCEPDEV/fv3-cam/noscrub/Eric.Rogers/prfv3rt1}
#clt fi
   export HOMEfv3=${HOMEfv3:-/scratch2/NCEPDEV/fv3-cam/$USER/dr-regional-workflow/regional_workflow}

   export COMINgfs0=${COMINgfs:-/scratch1/NCEPDEV/rstprod/com/gfs/prod}
   export COMINgfs=${COMINgfs:-/scratch2/NCEPDEV/fv3-cam/noscrub/Eric.Rogers/prfv3rt1}
#clt    export COMINgfs=${COMINgfs:-/scratch1/NCEPDEV/stmp2/Ting.Lei/dr-global-data}
   export COMINrap=${COMINrap:-/scratch1/NCEPDEV/rstprod/com/rap/prod}
   export COMINrap_user=${COMINrap2:-/scratch2/NCEPDEV/stmp1/Ting.Lei/dr-obs}
#clt   export COMINrap=${COMINrap:-/scratch1/NCEPDEV/stmp2/Ting.Lei/dr-obs/}
   export COMINrtma=/scratch4/NCEPDEV/rstprod/com/rtma2p5/prod
   # bias correction files from prev cycle
   export COMINbias=$COMOUT
   export fixcrtm=/scratch1/NCEPDEV/da/Michael.Lueken/CRTM_REL-2.2.3/crtm_v2.2.3/fix_update
   
export PTMP=${PTMP:-/scratch2/NCEPDEV/stmp3/${USER}}
export STMP=${STMP:-/scratch2/NCEPDEV/stmp3/${USER}}
export rzdmuser=mpyle

#export GESROOT_HOLD=/gpfs/hps3/emc/meso/save/Ting.Lei/dr-new-regional-workflow/regional_workflow/dr-hold
export NDATE=${NDATE:-/scratch2/NCEPDEV/nwprod/NCEPLIBS/utils/prod_util.v1.1.0/exec/ndate}
export NHOUR=${NHOUR:-/scratch2/NCEPDEV/nwprod/NCEPLIBS/utils/prod_util.v1.1.0/exec/nhour}
export HOMEfv3=${HOMEfv3:-/scratch2/NCEPDEV/fv3-cam/$USER/regional_workflow}
export Fix_temp=${Fix_temp:-/scratch2/NCEPDEV/fv3-cam/Ting.Lei/dr-regional-workflow/regional_workflow/dr-Fix_temp-ESG}
elif [ ${machine} = "wcoss_dell_p3.5" ]
then

export EXECfv3=/gpfs/dell6/emc/modeling/noscrub/emc.campara/fv3lamdax/regional_workflow/exec
export COMINgdas=${COMINgdas:-/gpfs/dell1/nco/ops/com/gfs/prod}
export GBCOMINgfs=${GBCOMINgfs:-/gpfs/dell1/nco/ops/com/gfs/para}
export COMINgfs=${COMINgfs:-/gpfs/dell1/nco/ops/com/gfs/para}
export COMINrtma=/gpfs/dell2/nco/ops/com/rtma/prod

export PTMP=${PTMP:-/gpfs/dell5/ptmp/${USER}}
export STMP=${STMP:-/gpfs/dell5/stmp/${USER}}
export rzdmuser=bblake

export NDATE=/gpfs/dell1/nco/ops/nwprod/prod_util.v1.1.4/exec/ips/ndate
export NHOUR=/gpfs/dell1/nco/ops/nwprod/prod_util.v1.1.4/exec/ips/nhour
export HOMEfv3=${HOMEfv3:-/gpfs/dell6/emc/modeling/noscrub/$USER/fv3lamda/regional_workflow}
export COMINrap=${COMINrap:-/gpfs/hps/nco/ops/com/rap/prod}
export COMINpararap=${COMINrap:-/gpfs/hps/nco/ops/com/rap/para}

export GESROOT_HOLD=${HOMEfv3}/dr-hold
export Fix_temp=${Fix_temp:-/gpfs/dell6/emc/modeling/noscrub/Ting.Lei/dr-newESG-regional-workflow/regional_workflow/dr-Fix_temp-ESG}
elif [ ${machine} = "orion" ]
then

   export COMINgfs=${COMINgfs:-/work/noaa/stmp/erogers/}

else

echo UNDEFINED ENVIRONMENT
exit 77

fi


export CRES=${CRES:-768}          #-- FV3 equivalent to 13-km global resolution
export CASE=C${CRES}
export gtype=regional    # grid type = uniform, stretch, nest, or regional

export PARMfv3=$HOMEfv3/parm
if [ ${machine} = "hera" ]
then
export EXECfv3=/scratch2/NCEPDEV/fv3-cam/Ting.Lei/dr-GFSV16-unified-workflow/ufs-srweather-app/bin
else
export EXECfv3=$HOMEfv3/exec
fi
#cltexport EXECfv3=/scratch2/NCEPDEV/fv3-cam/Ting.Lei/dr-eric/regional_workflow/exec/
export USHfv3=$HOMEfv3/ush
export LD_LIBRARY_PATH="${HOMEfv3}/sorc/regional_forecast.fd/ccpp/lib/${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}"

export FIXfv3=$HOMEfv3/fix
export FIXsar=$FIXfv3/fix_sar/${dom:-conus}
export FIXam=$FIXfv3/fix_am
export FIXco2=$FIXam/fix_co2_proj

export COMROOT=${PTMP}/com
export GESROOT=${PTMP}/nwges
#export GESROOT_HOLD=${PTMP}/nwges/${RUN}.hold
export GESROOT_HOLD=/scratch2/NCEPDEV/fv3-cam/Ting.Lei/dr-regional-workflow/regional_workflow/dr-hold

mkdir -p $GESROOT_HOLD
export comdir=ptmp
export gesdir=ptmp

export GETGES=$HOMEfv3/util/ush/getges_linkges_hourlypgrb_new.sh

export NHRSguess=06	#-- Forecast length for 1st guess generation
export NHRSda=01	#-- Forecast length for cycled DA
export NHRS=48          #-- Forecast length for free fcst
export envir_getges=${envir_getges:-prod}

export jlogfile=${STMP}/jlogfile.$envir.${RUN}.jlog
export LEVS=${LEVS:-61}
if [ $CRES = 3375 ]
then
export NPX=1921
export NPY=1297
elif [ $CRES = 775 ]
then
export NPX=397
export NPY=233
export NX_RES=396
export NY_RES=232
else
export NPX=1921
export NPY=1297
export NX_RES=1920
export NX_RES=1296

fi
L_LBC_UPDATE=${L_LBC_UPDATE:-FALSE}
NROWS_BLEND=${NROWS_BLEND:-0}
